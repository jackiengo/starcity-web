{:webserver {:port    #or [#env WEB_PORT 8080]
             :session {:name   "starcity-session"
                       :secure #profile {:prod    true
                                         :default false}
                       :domain #or [#env COOKIE_DOMAIN "localhost"]}}

 :datomic {:uri #or [#env DATOMIC_URI
                     ^:ref [:secrets :datomic :uri]
                     "datomic:mem://localhost:4334/starcity"]}

 :log {:level    #profile {:prod    :info
                           :default :trace}
       :appender #profile {:dev     :spit
                           :default :rolling}
       :file     #profile {:dev     "logs/server.log"
                           :default #or [#env LOG_PATH "/var/log/starcity-web/server.log"]}}

 :nrepl {:port #or [#env NREPL_PORT 7889]}

 :hosts {:this       #profile {:prod  "https://joinstarcity.com"
                               :stage "https://staging.joinstarcity.com"
                               :dev   #join ["http://localhost:"
                                             ^:ref [:webserver :port]]}
         :apply      #profile {:prod  "https://apply.joinstarcity.com"
                               :stage "https://apply.staging.joinstarcity.com"
                               :dev   "http://localhost:8081"}
         :odin       #profile {:prod  "https://my.joinstarcity.com"
                               :stage "https://my.staging.joinstarcity.com"
                               :dev   "http://localhost:8082"}
         :onboarding #profile {:prod  "https://onboarding.joinstarcity.com"
                               :stage "https://onboarding.staging.joinstarcity.com"
                               :dev   "http://localhost:8083"}}

 :secrets #include #env STARCITY_SECRETS}
